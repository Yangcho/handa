<style>
  .main {
    flex-basis: 100%;
    flex-shrink: 1;
    flex-grow: 0;
  }
  .food-list {
    width: 100%;
  }
</style>

<!-- 음식 관리 메인 화면 -->
<main class="main m-5">

  <!-- 음식 리스트 -->
  <section class="card w-100" aria-label="Food List">
    <div class="card-body w-100">
      <h4 class="mb-5">음식 목록</h4>
      <table class="table">
        <thead>
          <tr>
            <th style="width: 100px">음식코드</th>
            <th style="width: 200px">음식명</th>
            <th>재료정보</th>
          </tr>
        </thead>
        <tbody>
          <% foodList.map((food) => { %>
            <tr>
              <th><%= food.fdCntntsNo %></th>
              <td><%= food.fdNm %></td>
              <td><%= food.matrlInfo %></td>
            </tr>
          <% }) %>
        </tbody>
      </table>
      
      <article class="mt-4 d-flex justify-content-evenly">
        <!-- 페이지네이션 바 -->
        <%- include("partials/paginationBar.ejs") %>

        <!-- 검색 버튼 -->
        <form class="ms-5" action="/admin/food" method="get">
          <div class="input-group">
            <input type="hidden" id="searchOption" value="<%=searchOption%>">
            <select name="searchOption" id="searchSelect" class="form-select">
              <option value="fdCntntsNo">음식코드</option>
              <option value="fdNm">음식명</option>
              <option value="matrlInfo">재료정보</option>
            </select>
              <input type="search" name="searchKeyword" value="<%=searchKeyword%>" class="w-25 form-control" placeholder="검색">
              <span class="input-group-append">
                <button class="btn btn-outline-secondary bg-white btn-lg" type="submit">
                  <i class="fa fa-search"></i>
                </button>
              </span>
          </div>
        </form>
      </article>
    </div>

  </section>
</main>

<script>
  function isEmpty(str) {
    if (typeof str == "undefined" || str == null || str == "")
      return true;
    else
      return false;
  }

  // 페이지 로드 시
  window.addEventListener("load", onLoad, true);
  function onLoad() {
    let searchOption = document.querySelector("#searchOption").value;

    // 쿼리 스트링에 음식 검색 타입 적혀있다면 해당 option 선택 활성화
    if (!isEmpty(searchOption)) {
      document.querySelector(`#searchSelect option[value='${searchOption}']`).setAttribute("selected", "true");
    }
  }
</script>