{{#section "style"}}
<style>
  html, body {
    width: 100%;
    height: 100%;
  }
</style>
{{/section}}

{{#section "title"}}
  <title>식단 추가</title>
{{/section}}

<form class="w-100 d-flex flex-column justify-content-center align-items-center" action="/admin/diet/editor" method="post" enctype="multipart/form-data">
  <div class="d-flex flex-column w-50 mb-3">
    <img
      class="my-3"
      id="dietImage"
      width="300px"
      height="300px"
      src="/image/diet/normal/??"
      alt="식단이미지"
      onerror="this.src='/image/no_image_available.jpg';">
    <button
      type="button"
      class="mt-2 w-25 mb-2 btn btn-secondary"
      onclick="onClickImageSelectButton()">이미지 수정</button>
    <input
      class="d-none form-control"
      id="imageFileInput"
      type="file"
      accept=".jpg, .png"
      name="imageFile"
      onchange="onChangeImageFile(this)">
  </div>
  <div class="d-flex w-50 mb-3 form-floating">
    <div class="w-50 form-floating">
      <input type="number" name="cntntsNo" class="form-control" id="cntntsNoInput" placeholder="식단코드" required>
      <label for="cntntsNoInput">식단 코드</label>
    </div>
    <div class="w-50 form-floating">
      <input type="number" name="dietSeCode" class="form-control" id="dietSeCodeInput" placeholder="식단구분코드" required>
      <label for="dietSeCodeInput">식단 구분 코드</label>
    </div>
  </div>
  <div class="w-50 mb-3 form-floating">
    <input type="text" name="dietNm" class="form-control" id="dietNmInput" placeholder="식단 명" required>
    <label for="dietSeCodeInput">식단 명</label>
  </div>
  <div class="w-50 mb-3 form-floating">
    <span class="input-group-text">식단 상세 설명</span>
    <textarea class="h-100 form-control" name="dietCn" rows="15" aria-label="식단 상세 설명"></textarea>
  </div>
  <div class="d-flex w-50 mb-3 form-floating">
    <div class="w-25 form-floating">
      <input type="number" name="clriInfoInput" class="form-control" id="clriInfoInput" placeholder="열량" value=0>
      <label for="clriInfoInput">열량</label>
    </div>
    <div class="w-25 form-floating">
      <input type="number" name="crbhInfoInput" class="form-control" id="crbhInfoInput" placeholder="당질" value=0>
      <label for="crbhInfoInput">당질</label>
    </div>
    <div class="w-25 form-floating">
      <input type="number" name="protInfoInput" class="form-control" id="protInfoInput" placeholder="단백질" value=0>
      <label for="protInfoInput">단백질</label>
    </div>
    <div class="w-25 form-floating">
      <input type="number" name="ntrfsInfoInput" class="form-control" id="ntrfsInfoInput" placeholder="지질" value=0>
      <label for="ntrfsInfoInput">지질</label>
    </div>
  </div>
  <button class="w-50 my-3 btn btn-lg btn-primary" type="submit">전송</button>
  <a type="button" href="/admin/diet" class="mt-2 w-50 mb-2 btn btn-primary">뒤로 가기</a>
</form>

{{#section "script"}}
<script>
  // 이미지 파일 변경 버튼 클릭시
  function onClickImageSelectButton() {
    document.querySelector("#imageFileInput").click();
  }

  // 이미지 파일 변경시
  function onChangeImageFile(e) {
    let imgEl = document.querySelector("#dietImage");
    imgEl.setAttribute("src", window.URL.createObjectURL(e.files[0]));
  }
</script>
{{/section}}